<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: MVData/services/actions/action.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: MVData/services/actions/action.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>var Action, _;

_ = require('lodash');

/**
 * @namespace Action
*/


/**
 * The base class for all actions
 * @type {Action}
*/


module.exports = Action = (function() {
  function Action(info) {
    /**
     * Set each passed in property as it's own
    */

    var _this = this;
    _.each(info, function(val, key) {
      return _this[key] = val;
    });
    /**
     * To tell whether we are querying only the most recent items, or the entire history
     * Will one of:
     *     'latest'
     *     'oldest'
     * @type {String}
     * @default null
    */

    this.currentRequest = null;
    /**
     * The container for all Action specific data that will
     * containe all prospective data sent from the action and be returned
     * to the callback
     * @type {Object}
    */

    this.storeData = null;
    /**
     * Timestamp of the oldest returned requested item. Set to infinity if it doesn't get overwritten later.
     * @type {Number}
     * @default Inf
    */

    this.oldestTimestamp = 1 / 0;
    /**
     * Some services don't use timestamps to get items before/after others
     * this is just an alias to do the same thing
     * @type {Number}
     * @default Inf
    */

    this.oldestStamp = 1 / 0;
  }

  Action.prototype.service = 'undefined';

  /**
   * Adds request data to the action
   *
   * @param  {Object} requestData  data of previous queries
  */


  Action.prototype.configureRequest = function(requestData) {
    this.requestData = requestData;
    this.storeData.requestData = this.requestData;
    /**  if the oldest activitiy's timestamp exists, set it as something more useable for future queries*/

    if ((this.oldestTimestamp = this.requestData.oldestActivity)) {
      return this.oldestTimestamp = (new Date(this.oldestTimestamp)).getTime();
    }
  };

  /**
   * Based on the response from the action, will either run an error processing method
   * or continue parsing the action data to be returned
   *
   * IMPORTANT: Called as Service object NOT as Action
   *
   * @callback
   * @public
   * @fires Action#parseData
   * @param {Object} requestObj  the initial request object with callback and service info
   * @param {Object} err
   * @param {Object} data  response data pertaining to the action request
  */


  Action.prototype.parseData = function() {
    return console.log("Missing parseData method for " + this.service);
  };

  return Action;

})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="DB.html">DB</a></li></ul><h3>Namespaces</h3><ul><li><a href="Action.html">Action</a></li><li><a href="DataCollector.html">DataCollector</a></li><li><a href="GoogleAction.html">GoogleAction</a></li><li><a href="history..html">Tweets
Generate parameters for the request based on previous request data. Determines
whether to query only for the latest data, or to get the entire history.</a></li><li><a href="tweets.html">Tweets
The action that gets and handles all tweets</a></li><li><a href="Twitter.html">Twitter</a></li><li><a href="Youtube.html">Youtube</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_oauthClientInit">_oauthClientInit</a></li><li><a href="global.html#accessToken">accessToken</a></li><li><a href="global.html#currentRequest">currentRequest</a></li><li><a href="global.html#decrement">decrement</a></li><li><a href="global.html#extendDefault">extendDefault</a></li><li><a href="global.html#increment">increment</a></li><li><a href="global.html#oauth2Client">oauth2Client</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0</a> on Thu Dec 05 2013 16:03:06 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
